<!doctype html>
<html lang="en">
	<head>
		<%- include('partials/head'); %>
		<link rel="stylesheet" href="/css/sidebar.css">
	</head>
	<body>
		<header>
			<%- include('partials/header'); %>
		</header>

		<main class="container-fluid d-flex flex-nowrap">
			<aside class="border">
				<%- include('partials/client/sidebar'); %>
			</aside>
			<!-- Content -->
			<div class="p-5 w-100">
				<% if (showDefault) { %>
					<!-- Default Page for New Users -->
					<h3>Бережёного Бог бережёт</h3>
					<hr>
					<h3>Más vale prevenir que lamentar</h3>
					<hr>
					<h3>Better be safe than sorry</h3>
					<hr>
					<h3>安全总比后悔好</h3>
				<% } else { %>
					<!-- Financial Summary -->
					<h2 class="mb-4">Financial Summary</h2>

					<!-- Summary Cards -->
					<div class="row mb-4">
						<!-- Savings Card -->
						<div class="col-md-4 mb-3">
							<div class="card border-success">
								<div class="card-body">
									<h5 class="card-title text-success">
										<i data-feather="dollar-sign"></i> Savings
									</h5>
									<h3 class="mb-2">$<%= savingsBalance.toFixed(2) %></h3>
									<p class="card-text text-muted small mb-2">Chequing account balance</p>
									<a href="/client/transactions" class="btn btn-sm btn-outline-success">View Transactions</a>
								</div>
							</div>
						</div>

						<!-- Loans Card -->
						<div class="col-md-4 mb-3">
							<div class="card border-warning">
								<div class="card-body">
									<h5 class="card-title text-warning">
										<i data-feather="trending-down"></i> Loans
									</h5>
									<h3 class="mb-1">$<%= totalOwed.toFixed(2) %></h3>
									<p class="card-text text-muted small mb-0">Total owed</p>
									<p class="card-text text-muted small mb-2">
										<% if (totalLoaned > 0) { %>
											Principal: $<%= totalLoaned.toFixed(2) %><br>
										<% } %>
										<%= loansCount %> loan(s)
									</p>
									<a href="/client/loan/view" class="btn btn-sm btn-outline-warning">View Loans</a>
									<a href="/client/loan/add" class="btn btn-sm btn-warning">Request Loan</a>
								</div>
							</div>
						</div>

						<!-- Investments Card -->
						<div class="col-md-4 mb-3">
							<div class="card border-primary">
								<div class="card-body">
									<h5 class="card-title text-primary">
										<i data-feather="trending-up"></i> Investments
									</h5>
									<h3 class="mb-1">$<%= currentInvestmentValue.toFixed(2) %></h3>
									<p class="card-text text-muted small mb-0">Current value</p>
									<p class="card-text text-muted small mb-2">
										<% if (totalInvested > 0) { %>
											Principal: $<%= totalInvested.toFixed(2) %>
											<% if (currentInvestmentValue > totalInvested) { %>
												<br><span class="text-success">+$<%= (currentInvestmentValue - totalInvested).toFixed(2) %> returns</span>
											<% } %>
											<br>
										<% } %>
										<%= gicsCount %> investment(s)
									</p>
									<a href="/client/gic/view" class="btn btn-sm btn-outline-primary">View Investments</a>
									<a href="/client/gic/add" class="btn btn-sm btn-primary">Invest</a>
								</div>
							</div>
						</div>
					</div>

					<!-- Net Worth Summary -->
					<div class="row mb-4">
						<div class="col-12">
							<div class="card bg-light">
								<div class="card-body">
									<h5 class="card-title">Net Worth Overview</h5>
									<div class="row text-center">
										<div class="col-md-4">
											<p class="text-muted mb-1">Total Assets</p>
											<h4 class="text-success">$<%= (savingsBalance + currentInvestmentValue).toFixed(2) %></h4>
										</div>
										<div class="col-md-4">
											<p class="text-muted mb-1">Total Liabilities</p>
											<h4 class="text-danger">$<%= totalOwed.toFixed(2) %></h4>
										</div>
										<div class="col-md-4">
											<p class="text-muted mb-1">Net Worth</p>
											<h4 class="<%= (savingsBalance + currentInvestmentValue - totalOwed) >= 0 ? 'text-success' : 'text-danger' %>">
												$<%= (savingsBalance + currentInvestmentValue - totalOwed).toFixed(2) %>
											</h4>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Quote Section -->
					<div class="mt-5 pt-4 border-top">
						<h3>Бережёного Бог бережёт</h3>
						<hr>
						<h3>Más vale prevenir que lamentar</h3>
						<hr>
						<h3>Better be safe than sorry</h3>
						<hr>
						<h3>安全总比后悔好</h3>
					</div>
				<% } %>
			</div>
		</main>
		<footer>
			<%- include('partials/footer'); %>
		</footer>

		<!-- Icons -->
		<script src="/js/feather.min.js"></script>
		<script>feather.replace()</script>
	</body>
</html>
